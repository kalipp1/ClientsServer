{"ast":null,"code":"import _objectSpread from\"/Users/maksymilianbirecki/ClientsServer/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Button,Form,FormGroup,Label,Input,Row,Col,Alert,Progress}from'reactstrap';import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{addSeatRequest,getRequests}from'../../../redux/seatsRedux';import'./OrderTicketForm.scss';import SeatChooser from'./../SeatChooser/SeatChooser';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderTicketForm=()=>{const dispatch=useDispatch();const requests=useSelector(getRequests);console.log(requests);const[order,setOrder]=useState({client:'',email:'',day:1,seat:''});const[isError,setIsError]=useState(false);const[reservationDone,setReservationDone]=useState(false);const updateSeat=(e,seatId)=>{e.preventDefault();setOrder(_objectSpread(_objectSpread({},order),{},{seat:seatId}));};const updateTextField=_ref=>{let{target}=_ref;const{value,name}=target;setOrder(_objectSpread(_objectSpread({},order),{},{[name]:value}));};const updateNumberField=_ref2=>{let{target}=_ref2;const{value,name}=target;setOrder(_objectSpread(_objectSpread({},order),{},{[name]:parseInt(value)}));};const submitForm=async e=>{e.preventDefault();if(order.client&&order.email&&order.day&&order.seat){dispatch(addSeatRequest(order));setReservationDone(true);setOrder({client:'',email:'',day:1,seat:''});setIsError(false);}else{setIsError(true);}};useEffect(()=>{if(requests['ADD_SEAT']&&requests['ADD_SEAT'].success){setReservationDone(false);}},[requests]);return/*#__PURE__*/_jsx(Form,{className:\"order-ticket-form\",onSubmit:submitForm,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:\"12\",md:\"6\",children:[isError&&/*#__PURE__*/_jsx(Alert,{color:\"warning\",children:\"There are some errors in you form. Have you fill all the fields? Maybe you forgot to choose your seat?\"}),requests['ADD_SEAT']&&requests['ADD_SEAT'].error&&!isError&&/*#__PURE__*/_jsx(Alert,{color:\"danger\",children:requests['ADD_SEAT'].error}),requests['ADD_SEAT']&&requests['ADD_SEAT'].success&&!isError&&/*#__PURE__*/_jsx(Alert,{color:\"success\",children:\"You've booked your ticket! Check you email in order to make a payment.\"}),requests['ADD_SEAT']&&requests['ADD_SEAT'].pending&&/*#__PURE__*/_jsx(Progress,{animated:true,className:\"mb-5\",color:\"primary\",value:75}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"clientEmail\",children:\"Name\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",value:order.client,name:\"client\",onChange:updateTextField,id:\"clientName\",placeholder:\"John Doe\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"clientEmail\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",value:order.email,name:\"email\",onChange:updateTextField,id:\"clientEmail\",placeholder:\"johndoe@example.com\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"clientDay\",children:\"Select which day of festivals are you interested in:\"}),/*#__PURE__*/_jsxs(Input,{type:\"select\",value:order.day,name:\"day\",onChange:updateNumberField,id:\"exampleSelect\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"1\"}),/*#__PURE__*/_jsx(\"option\",{children:\"2\"}),/*#__PURE__*/_jsx(\"option\",{children:\"3\"})]}),/*#__PURE__*/_jsx(\"small\",{id:\"dayHelp\",className:\"form-text text-muted\",children:\"Every day of the festival uses individual ticket. You can book only one ticket at the time.\"})]}),/*#__PURE__*/_jsx(FormGroup,{check:true,children:/*#__PURE__*/_jsxs(Label,{check:true,children:[/*#__PURE__*/_jsx(Input,{required:true,type:\"checkbox\"}),\" I agree with \",/*#__PURE__*/_jsx(\"a\",{href:\"/terms-and-conditions\",children:\"Terms and conditions\"}),\" and \",/*#__PURE__*/_jsx(\"a\",{href:\"/privacy-policy\",children:\"Privacy Policy\"}),\".\"]})}),/*#__PURE__*/_jsx(Button,{color:\"primary\",className:\"mt-3\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(Col,{xs:\"12\",md:\"6\",children:/*#__PURE__*/_jsx(SeatChooser,{chosenDay:order.day,chosenSeat:order.seat,updateSeat:updateSeat,onSeatReserved:reservationDone})})]})});};export default OrderTicketForm;","map":{"version":3,"names":["Button","Form","FormGroup","Label","Input","Row","Col","Alert","Progress","useState","useEffect","useDispatch","useSelector","addSeatRequest","getRequests","SeatChooser","jsx","_jsx","jsxs","_jsxs","OrderTicketForm","dispatch","requests","console","log","order","setOrder","client","email","day","seat","isError","setIsError","reservationDone","setReservationDone","updateSeat","e","seatId","preventDefault","_objectSpread","updateTextField","_ref","target","value","name","updateNumberField","_ref2","parseInt","submitForm","success","className","onSubmit","children","xs","md","color","error","pending","animated","for","type","onChange","id","placeholder","check","required","href","chosenDay","chosenSeat","onSeatReserved"],"sources":["/Users/maksymilianbirecki/ClientsServer/client/src/components/features/OrderTicketForm/OrderTicketForm.js"],"sourcesContent":["import { Button, Form, FormGroup, Label, Input, Row, Col, Alert, Progress } from 'reactstrap';\r\nimport { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addSeatRequest, getRequests } from '../../../redux/seatsRedux';\r\n\r\nimport './OrderTicketForm.scss';\r\nimport SeatChooser from './../SeatChooser/SeatChooser';\r\n\r\nconst OrderTicketForm = () => {\r\n  const dispatch = useDispatch();\r\n  const requests = useSelector(getRequests);\r\n  console.log(requests);\r\n\r\n  const [order, setOrder] = useState({\r\n    client: '',\r\n    email: '',\r\n    day: 1,\r\n    seat: ''\r\n  });\r\n  const [isError, setIsError] = useState(false);\r\n  const [reservationDone, setReservationDone] = useState(false);\r\n\r\n  const updateSeat = (e, seatId) => {\r\n    e.preventDefault();\r\n    setOrder({ ...order, seat: seatId });\r\n  }\r\n\r\n  const updateTextField = ({ target }) => {\r\n    const { value, name } = target;\r\n    setOrder({ ...order, [name]: value });\r\n  }\r\n\r\n  const updateNumberField = ({ target }) => {\r\n    const { value, name } = target;\r\n    setOrder({ ...order, [name]: parseInt(value) });\r\n  }\r\n\r\n  const submitForm = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if(order.client && order.email && order.day && order.seat) {\r\n      dispatch(addSeatRequest(order));\r\n      setReservationDone(true);\r\n      setOrder({\r\n        client: '',\r\n        email: '',\r\n        day: 1,\r\n        seat: '',\r\n      });\r\n      setIsError(false);\r\n    } else {\r\n      setIsError(true);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (requests['ADD_SEAT'] && requests['ADD_SEAT'].success) {\r\n      setReservationDone(false);\r\n    }\r\n  }, [requests]);\r\n\r\n  return (\r\n    <Form className=\"order-ticket-form\" onSubmit={submitForm}>\r\n      <Row>\r\n        <Col xs=\"12\" md=\"6\">\r\n          { (isError) && <Alert color=\"warning\">There are some errors in you form. Have you fill all the fields? Maybe you forgot to choose your seat?</Alert> }\r\n          { (requests['ADD_SEAT'] && requests['ADD_SEAT'].error && !isError) && <Alert color=\"danger\">{requests['ADD_SEAT'].error}</Alert> }\r\n          { (requests['ADD_SEAT'] && requests['ADD_SEAT'].success && !isError) && <Alert color=\"success\">You've booked your ticket! Check you email in order to make a payment.</Alert> }\r\n          { (requests['ADD_SEAT'] && requests['ADD_SEAT'].pending) && <Progress animated className=\"mb-5\" color=\"primary\" value={75} /> }\r\n          <FormGroup>\r\n            <Label for=\"clientEmail\">Name</Label>\r\n            <Input type=\"text\" value={order.client} name=\"client\" onChange={updateTextField} id=\"clientName\" placeholder=\"John Doe\" />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for=\"clientEmail\">Email</Label>\r\n            <Input type=\"email\" value={order.email} name=\"email\" onChange={updateTextField} id=\"clientEmail\" placeholder=\"johndoe@example.com\" />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label for=\"clientDay\">Select which day of festivals are you interested in:</Label>\r\n            <Input type=\"select\" value={order.day} name=\"day\" onChange={updateNumberField} id=\"exampleSelect\">\r\n              <option>1</option>\r\n              <option>2</option>\r\n              <option>3</option>\r\n            </Input>\r\n            <small id=\"dayHelp\" className=\"form-text text-muted\">Every day of the festival uses individual ticket. You can book only one ticket at the time.</small>\r\n          </FormGroup>\r\n          <FormGroup check>\r\n            <Label check>\r\n              <Input required type=\"checkbox\" /> I agree with <a href=\"/terms-and-conditions\">Terms and conditions</a> and <a href=\"/privacy-policy\">Privacy Policy</a>.\r\n            </Label>\r\n          </FormGroup>\r\n          <Button color=\"primary\" className=\"mt-3\">Submit</Button>\r\n        </Col>\r\n        <Col xs=\"12\" md=\"6\">\r\n          <SeatChooser \r\n            chosenDay={order.day}\r\n            chosenSeat={order.seat} \r\n            updateSeat={updateSeat}\r\n            onSeatReserved={reservationDone}\r\n            />\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n  )\r\n}\r\n\r\nexport default OrderTicketForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}